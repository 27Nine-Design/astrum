var ndplComponent=Vue.extend({data:function(){return{loaded:false,hide_sample_code:false}},props:{component:{required:true}},computed:{inline_styles:function(){var b=this,a="";if(b.loaded){if(b.component.options.sample_min_height){a+="min-height:"+b.component.options.sample_min_height+"px;"}}if(b.component.options.sample_overflow_hidden){a+="overflow: hidden;"}if(b.component.options.sample_background_color){a+="background-color:"+b.component.options.sample_background_color+" !important;"}return a}},watch:{"component.html":function(){var a=this;if(this.component.html.length){a.$root.applySyntaxHighlighting(a.$el)}}},mounted:function(){var a=this;Astrum.$on("loaded",function(){window.addEventListener("scroll",a.updateActive);window.addEventListener("resize",a.updateActive);a.setHideSample(function(){a.loaded=true})});Astrum.$on("resizing",function(b){a.loaded=false;if(!b){a.setHideSample(function(){a.loaded=true})}});if(a.component.html){a.$root.applySyntaxHighlighting(a.$el)}},methods:{updateActive:function(){var c=this;if(c.$root&&c.$root.scroll_position>=c.$el.offsetTop-60&&c.$root.scroll_position<c.$el.offsetTop+c.$el.offsetHeight){if(!c.$root.scrolling_to&&!c.isActive(c.component)){c.$root.active_components.push(c.component);c.$root.open_group=null;c.$root.updateHash(c.component.id)}}else{if(c.$root&&!c.$root.scrolling_to){for(var b=0;b<c.$root.active_components.length;b++){var a=c.$root.active_components[b];if(a.id===c.component.id){c.$root.active_components.splice(b,1);return}}}}},isActive:function(a){var e=this;for(var b=0;b<e.$root.active_components.length;b++){var d=e.$root.active_components[b];if(a.id===d.id){return true}}return false},shouldInvertText:function(b){var a=this.$root.convertHexToRgb(b),c=this.$root.getColorBrightness(a);return c>210},shouldApplyBorder:function(b){var a=this.$root.convertHexToRgb(b),c=this.$root.getColorBrightness(a);return c>240},setHideSample:function(b){b=typeof b!=="undefined"?b:function(){};var a=this;a.hide_sample_code=false;setTimeout(function(){if(a.$el.querySelector(".ndpl-component__code")){if(a.$el.querySelector(".ndpl-component__sample").offsetHeight<=74&&!a.component.options.disabled_auto_sample_hiding){a.hide_sample_code=true}if(a.component.options.disabled_auto_sample_hiding&&a.component.options.disabled_auto_sample_hiding.hasOwnProperty("show_on_mobile")&&a.component.options.disabled_auto_sample_hiding.hasOwnProperty("show_on_desktop")){if(a.$root.mobile_view){a.hide_sample_code=!a.component.options.disabled_auto_sample_hiding.show_on_mobile}else{a.hide_sample_code=!a.component.options.disabled_auto_sample_hiding.show_on_desktop}}}b()},0)},isCodeVisible:function(){var a=this;return !a.hide_sample_code}}});Vue.component("ndpl-component",ndplComponent);var ndplGroup=Vue.extend({props:{group:{required:true}}});Vue.component("ndpl-group",ndplGroup);var Astrum=new Vue({el:"[data-app=astrum]",data:{intro:null,project_logo:null,project_favicon:null,project_name:null,project_url:null,copyright_start_year:null,client_name:null,client_url:null,creators:{},content:{},groups:{},theme:{border_color:null,highlight_color:null,brand_color:null,background_color:null,code_highlight_theme:null,override_code_highlight_bg:null,sample_dark_background:null,show_project_name:null,show_version:null,max_width:null,titles:{library_title:null,pages_title:null,components_title:null}},assets:{css:[],js:[]},font_libraries:{typekit_code:null,google_web_fonts:null,typography_web_fonts:null},log:{error:[],info:[]},components_count:0,groups_count:0,components_loaded_count:0,groups_loaded_count:0,groups_loaded:false,loaded:false,resizing:false,typekit_loaded:false,scroll_position:0,prev_scroll_position:0,active_group:null,active_components:[],active_page:null,open_group:null,show_first_page_on_load:false,scrolling_to:false,sidebar_scrolling:false,window_outer_width:0,breakpoint:960,mobile_view:false,open_nav:false,rtime:new Date(1,1,2000,12,0,0),timeout:false,delta:200,return_load_time:true,version:null},computed:{project:function(){if(this.project_name&&this.project_url){return'<a href="'+this.project_url+'" target="_blank"><span>'+this.project_name+"</span></a>"}if(this.project_name&&!this.project_url){return this.project_name}return null},copyright:function(){var d=new Date(),c="",a="",b="",f="";if(d.getFullYear()==this.copyright_start_year){c=this.copyright_start_year}if(d.getFullYear()>this.copyright_start_year){c=this.copyright_start_year+" - "+d.getFullYear()}if(this.client_name&&this.client_url){a='<a href="'+this.client_url+'" target="_blank">'+this.client_name+"</a>"}if(this.client_name&&!this.client_url){a=this.client_name}if(this.creators.length&&this.creators[0].name){for(var e=0;e<this.creators.length;e++){prefix=e===this.creators.length-1?" & ":", ";url=this.creators[e].url;name=this.creators[e].name.replace(" ","&nbsp;");b+=prefix+'<a href="'+url+'" target="_blank">'+name+"</a>"}}if(b){f="<br/>Pattern library created by "+b.substring(2)+"."}return"&copy; "+c+" "+a+f},library_inline_styles:function(){var b=this,a="";if(b.theme.max_width){a+="max-width:"+b.theme.max_width+"px;"}return a}},watch:{groups_loaded:function(){var a=this;a.setupComponents()},loaded:function(){var a=this;if(a.loaded===true){a.scrollTo(window.location.hash);a.injectProjectScripts();Astrum.$emit("loaded")}}},mounted:function(){var b=this;if(b.return_load_time){console.time("Astrum loaded in")}b.loadDataFile();b.window_outer_width=window.outerWidth;b.mobile_view=b.window_outer_width>=b.breakpoint?false:true;window.addEventListener("scroll",b.setScrollPosition);window.addEventListener("resize",function(){b.window_outer_width=window.outerWidth;b.setScrollPosition();b.mobile_view=b.window_outer_width>=b.breakpoint?false:true;b.rtime=new Date();if(b.timeout===false&&!b.mobile_view){b.timeout=true;setTimeout(b.trackResizing,b.delta)}});var a=document.querySelector(".ndpl-sidebar");a.addEventListener("mouseover",function(c){b.sidebar_scrolling=true});a.addEventListener("mouseleave",function(c){b.sidebar_scrolling=false});setTimeout(function(){var c=b.isLoadingPage();if(c){b.loadPage(c)}},0)},methods:{injectProjectStyles:function(){var d=this,b=document.getElementsByTagName("head").item(0);for(var a=0;a<d.assets.css.length;a++){var c=document.createElement("link");c.rel="stylesheet";c.href=d.assets.css[a];b.appendChild(c)}},injectThemeStyles:function(){var d=this,a=document.getElementsByTagName("head").item(0),b;b=document.createElement("style");b.type="text/css";b.appendChild(document.createTextNode("/* Targeted theme styles */.ndpl-folding-cube .ndpl-cube:before { background-color: "+d.theme.brand_color+" !important; }.ndpl-component__sample--inverted    { background-color: "+d.theme.sample_dark_background+" !important }.ndpl-c-background                   { background-color: "+d.theme.background_color+" !important; }.ndpl-c-border                       { border-color: "+d.theme.border_color+" !important; }.ndpl-c-border-b                     { border-bottom-color: "+d.theme.border_color+" !important; }.ndpl-c-highlight                    { background-color: "+d.theme.highlight_color+" !important; }.ndpl-c-highlight-ca a.active,.ndpl-c-highlight-ca a:hover         { background-color: "+d.theme.highlight_color+" !important; }.ndpl-c-brand-c                      { color: "+d.theme.brand_color+" !important; }.ndpl-c-brand-bg                     { background-color: "+d.theme.brand_color+" !important; }.ndpl-c-brand-b                      { border-color: "+d.theme.brand_color+" !important; }.ndpl-c-brand-bl-ca a.active,.ndpl-c-brand-bl-ca a:hover          { border-left-color: "+d.theme.brand_color+" !important; }.ndpl-c-brand-a:hover                { color: "+d.theme.brand_color+" !important; }.ndpl-c-brand-ca a:hover             { color: "+d.theme.brand_color+" !important; }.ndpl-c-brand-cai a                  { color: "+d.theme.brand_color+" !important; }"));a.appendChild(b);var c=document.createElement("link");c.rel="stylesheet";c.href="app/js/vendor/highlight.js/9.9.0/styles/"+d.theme.code_highlight_theme+".min.css";a.appendChild(c);if(d.theme.override_code_highlight_bg){b=document.createElement("style");b.type="text/css";b.appendChild(document.createTextNode(".hljs { background:"+d.theme.highlight_color+" !important; }"));a.appendChild(b)}},injectFontLibraries:function(){var f=this,b=document.getElementsByTagName("head").item(0),c,a;if(f.font_libraries.google_web_fonts){c=document.createElement("link");c.rel="stylesheet";c.href=f.font_libraries.google_web_fonts;b.appendChild(c)}if(f.font_libraries.typography_web_fonts){c=document.createElement("link");c.rel="stylesheet";c.href=f.font_libraries.typography_web_fonts;b.appendChild(c)}if(f.font_libraries.typekit_code){a=document.createElement("script");a.src="https://use.typekit.net/"+f.font_libraries.typekit_code+".js";b.appendChild(a);try{Typekit.load({async:true})}catch(d){}}},injectProjectScripts:function(){var d=this,a=document.getElementsByTagName("body")[0];for(var c=0;c<d.assets.js.length;c++){var b=document.createElement("script");b.src=d.assets.js[c];a.appendChild(b)}},injectMeta:function(){var d=this,a=document.getElementsByTagName("head").item(0);var c=d.project_name?d.project_name+" | Pattern Library":"Pattern Library";document.title=c;var b=document.createElement("meta");b.name="application-name";b.content="Astrum "+d.version;a.appendChild(b);link=document.createElement("link");link.rel="shortcut icon";link.href=d.project_favicon;a.appendChild(link)},applySyntaxHighlighting:function(a){setTimeout(function(){var d=a.querySelectorAll("pre code");for(var b=0;b<d.length;b++){var c=d[b];hljs.highlightBlock(c)}},0)},loadDataFile:function(){var a=this;a.$http.get("./data.json?cb="+new Date()).then(function(b){a.initData(b.data,function(){a.injectThemeStyles();a.injectProjectStyles();a.injectFontLibraries();a.injectMeta();if(a.$data.groups.length){a.setupGroups()}else{a.logInfo("You need to add a component to your library before it can be loaded.<br/>You can either do this manually by editing your <code>data.json</code> file,<br/> or you can use the command line helper: <code>astrum new [group_name/component_name]</code>")}})})},isLoadingPage:function(){var d=this,c=location.hash;if(d.content.pages!==undefined&&d.content.pages.length){if(c){for(var a=0;a<d.content.pages.length;a++){var b=d.content.pages[a];if(b.name==c.replace("#","")){return b}}}else{if(d.content.show_first_page_on_load){return d.content.pages[0]}}}return false},initData:function(b,d){d=typeof d!=="undefined"?d:function(){};var c=this;for(var a in b){Vue.set(c,a,b[a])}d()},updateHash:function(a){history.pushState?history.pushState(null,null,"#"+a):location.hash=a},setupGroups:function(){var c=this;for(var a=0;a<c.groups.length;a++){var b=c.groups[a];Vue.set(b,"id","group-"+b.name);Vue.set(b,"active",false);Vue.set(b,"description","");c.groups_count=c.groups.length;c.loadGroup(b)}},setupComponents:function(){var d=this;for(var b=0;b<d.groups.length;b++){var c=d.groups[b];d.components_count+=c.components.length;for(var a=0;a<c.components.length;a++){Vue.set(c.components[a],"id","group-"+c.name+"-component-"+c.components[a].name);Vue.set(c.components[a],"group_id","group-"+c.name);Vue.set(c.components[a],"active",false);Vue.set(c.components[a],"options",c.components[a].options?c.components[a].options:{});Vue.set(c.components[a],"options.sample_always_show",c.components[a].options.sample_always_show?c.components[a].options.sample_always_show:false);Vue.set(c.components[a],"options.sample_mobile_hidden",c.components[a].options.sample_mobile_hidden?c.components[a].options.sample_mobile_hidden:false);Vue.set(c.components[a],"options.sample_dark_background",c.components[a].options.sample_dark_background?c.components[a].options.sample_dark_background:false);Vue.set(c.components[a],"options.disable_code_sample",c.components[a].options.disable_code_sample?c.components[a].options.disable_code_sample:false);Vue.set(c.components[a],"code_show",false);Vue.set(c.components[a],"type",c.components[a].type?c.components[a].type:"standard");Vue.set(c.components[a],"width",c.components[a].width?c.components[a].width:"full");Vue.set(c.components[a],"html","");Vue.set(c.components[a],"description","");d.loadComponent(c.components[a])}}},loadGroup:function(b){var c=this,a="./components/"+b.name;Astrum.$http.get(a+"/description.md?cb="+new Date()).then(function(d){if(typeof d.data==="string"){b.description=marked(d.data)}c.areGroupsLoaded()},function(){c.logError("Description file for <strong>"+b.name+"</strong> group failed to load from <code>"+a+"/description.md</code>")})},loadComponent:function(a){var c=this,b="./components/"+a.group+"/"+a.name;c.$http.get(b+"/markup.html?cb="+new Date()).then(function(d){a.html=d.data;c.areComponentsLoaded()},function(){c.logError("HTML file for <strong>"+a.name+"</strong> component failed to load from <code>"+b+"/html.md</code>")});c.$http.get(b+"/description.md?cb="+new Date()).then(function(d){if(typeof d.data==="string"){a.description=marked(d.data)}c.areComponentsLoaded()},function(){c.logError("Description file for <strong>"+a.name+"</strong> component failed to load from <code>"+b+"/description.md</code>")})},areGroupsLoaded:function(){var a=this;a.groups_loaded_count+=1;if(a.groups_loaded_count===a.groups_count){setTimeout(function(){a.groups_loaded=true},1000)}},areComponentsLoaded:function(){var a=this;a.components_loaded_count+=1;if(a.components_loaded_count===a.components_count*2){setTimeout(function(){a.loaded=true;if(a.return_load_time){console.timeEnd("Astrum loaded in")}},2000)}},addLog:function(b,c,a){var d=this;a=typeof a!=="undefined"?a:"error";c=typeof c!=="undefined"?c:null;d.log[a].push(b);console[a]("[Pattern Library warn]: "+b);if(c){console[a](c)}},logError:function(a,b){var c=this;c.addLog(a,b,"error")},logInfo:function(a,b){var c=this;c.addLog(a,b,"info")},setScrollPosition:function(){var c=this,b=document.documentElement,a=b&&b.scrollTop||document.body.scrollTop;c.prev_scroll_position=c.scroll_position;c.scroll_position=a},getScrollDirection:function(){var a=this;return a.prev_scroll_position<a.scroll_position?"down":"up"},scrollToHref:function(a){var b=this;b.scrollTo(a.target.hash);b.active_page=null},scrollTo:function(a){var c=this,b=c.mobile_view?79:30;if(!a){return}c.scrolling_to=true;smoothScroll.animateScroll(a,null,{offset:b,callback:function(){c.scrolling_to=false;c.open_nav=false}})},toggleNav:function(){var a=this;a.open_nav=!a.open_nav},toggleOpenGroups:function(a){var b=this;b.open_group=b.open_group==a.id?null:a.id;b.active_page=null},loadPage:function(a){var b=this;b.active_page=a;b.active_components=[];b.open_group=null;b.open_nav=false;b.$http.get(a.file+"?cb="+new Date()).then(function(c){Vue.set(b.active_page,"markup",marked(c.data));b.applySyntaxHighlighting(document)});b.updateHash(a.name)},trackResizing:function(){var a=this;a.resizing=true;Astrum.$emit("resizing",true);if(new Date()-a.rtime<a.delta){setTimeout(a.trackResizing,a.delta)}else{a.timeout=false;setTimeout(function(){a.resizing=false;Astrum.$emit("resizing",false)},1000)}},convertHexToRgb:function(c){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;c=c.replace(b,function(e,h,f,d){return h+h+f+f+d+d});var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},getColorBrightness:function(a){return Math.round(((parseInt(a.r)*299)+(parseInt(a.g)*587)+(parseInt(a.b)*114))/1000)}}});